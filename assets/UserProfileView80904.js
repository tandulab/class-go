import{q as V,O as S,a as L,u as b,b as U,P as w,e as v,s as F,g as y,_ as g,r as m,h as C,i as P,k as s,j as l,f as B,w as x,x as i}from"../index80904.js";import{P as $}from"./PasswordWithValidation80904.js";const k={setup(){const n=V({}),{handleSubmit:t,resetForm:_}=S(),o=L(),c=b(),{showLoader:u,hideLoader:a}=U();w("password",v().min(8,"La password deve avere almeno 8 caratteri").required("La nuova password Ã¨ obbligatoria")),w("password_confirmation",v().min(8,"La password deve avere almeno 8 caratteri").required("Il conferma password Ã¨ obbligatorio").test("passwords-match","Le password non coincidono",function(e){return n.value.password===e}));const r=t(async()=>{const e={id:c.currentUserId,user:n.value};u(),await c.changePassword(e).then(async()=>{F(o,{message:"Password aggiornata correttamente",error:!1}),a(),_()}).catch(d=>{a(),y(o,d)})});return{tmp_user:n,onSubmit:r}},components:{PasswordWithValidation:$}},N={class:"formgrid grid mt-3"},q={class:"field col-12 flex flex-column"},W={class:"field col-12 flex flex-column"},j={class:"flex justify-content-end mt-3"};function E(n,t,_,o,c,u){const a=m("PasswordWithValidation"),r=m("Button");return C(),P("form",{onSubmit:t[2]||(t[2]=(...e)=>o.onSubmit&&o.onSubmit(...e)),class:"flex flex-column col-12"},[s("div",N,[s("div",q,[l(a,{name:"password",label:"Nuova password*",modelValue:o.tmp_user.password,class:"w-full","onUpdate:modelValue":t[0]||(t[0]=e=>o.tmp_user.password=e)},null,8,["modelValue"])]),s("div",W,[l(a,{name:"password_confirmation",label:"Conferma password*",modelValue:o.tmp_user.password_confirmation,class:"w-full","onUpdate:modelValue":t[1]||(t[1]=e=>o.tmp_user.password_confirmation=e)},null,8,["modelValue"])])]),s("div",j,[l(r,{type:"submit",label:"Cambia password",rounded:"",outlined:""})])],32)}const I=g(k,[["render",E]]),T={setup(){const n=b();return{user:B(()=>n.currentUser)}},components:{ChangePasswordForm:I}},A={class:"flex"},D={class:"col-6 flex-1"},O=s("h1",null,"Profilo",-1),z={class:"flex flex-column"},G={class:"col-12 flex flex-colum align-items-center p-0"},H=s("div",{class:"col-2"},"Nome",-1),J={class:"font-bold"},K={class:"col-12 flex flex-colum align-items-center p-0"},M=s("div",{class:"col-2"},"Cognome",-1),Q={class:"font-bold"},R={class:"col-12 flex flex-colum align-items-center p-0"},X=s("div",{class:"col-2"},"Email",-1),Y={class:"font-bold"},Z={class:"col-12 flex flex-colum align-items-center p-0"},ss=s("div",{class:"col-2"},"Sede",-1),os={class:"font-bold"},es={class:"col-6 flex-1"},ts=s("h1",null,"Cambia password",-1);function as(n,t,_,o,c,u){const a=m("Card"),r=m("ChangePasswordForm");return C(),P("div",A,[s("div",D,[l(a,{class:"h-full"},{content:x(()=>{var e,d,f,p,h;return[O,s("div",z,[s("div",G,[H,s("div",J,i(((e=o.user)==null?void 0:e.first_name)||"-"),1)]),s("div",K,[M,s("div",Q,i(((d=o.user)==null?void 0:d.last_name)||"- "),1)]),s("div",R,[X,s("div",Y,i(((f=o.user)==null?void 0:f.email)||"- "),1)]),s("div",Z,[ss,s("div",os,i(((h=(p=o.user)==null?void 0:p.location)==null?void 0:h.name)||"-"),1)])])]}),_:1})]),s("div",es,[l(a,{class:"h-full"},{content:x(()=>[ts,l(r)]),_:1})])])}const rs=g(T,[["render",as]]);export{rs as default};
