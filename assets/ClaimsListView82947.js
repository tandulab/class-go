import{d as V,a5 as z,z as B,u as $,q as E,a2 as w,f as y,o as I,r as m,G as j,h as u,i as p,k as i,x as d,j as t,M as A,w as a,H as b,l as x,L as O,a3 as _,a6 as P,N as q,K as G}from"../index82947.js";const H={class:"flex justify-content-between align-items-center"},Q={key:0},R={key:1},J={key:0},W={class:"flex flex-row"},X={class:"ml-2"},Y=V({__name:"ClaimsTable",setup(F){const o=z(),s=B(),M=$(),f=E({first_name:{value:"",matchMode:w.LIKE},last_name:{value:"",matchMode:w.LIKE},tax_code:{value:"",matchMode:w.EQ}}),D=y(()=>o.getAllClaims),h=y(()=>o.getTotalClaims),k=y(()=>M.currentUser),K=()=>{o.table.onFilter(f.value)},T=function(){s.setDetailType("claimDetail",!0,"Nuova sinistro",null),s.updateSidebar(!0),s.setShowDetail(!0)},U=function(g){s.setDetailType("claimDetail",!1,"Dettaglio sinistro",g.id,void 0,!1),s.updateSidebar(!0)};return I(()=>{o.table.loadLazyData()}),(g,c)=>{var S;const C=m("Button"),v=m("InputText"),n=m("Column"),N=m("DataTable"),L=j("tooltip");return u(),p("div",null,[i("div",H,[i("h1",null,[h.value==1?(u(),p("span",Q," 1 Sinistro")):(u(),p("span",R,d(h.value)+" Sinistri",1))]),((S=k.value)==null?void 0:S.role)!=="admin"?(u(),p("div",J,[t(C,{label:"Aggiungi sinistro",class:"mb-3",rounded:"",outlined:"",onClick:c[0]||(c[0]=e=>T()),severity:"contrast"})])):A("",!0)]),t(N,{value:D.value,"total-records":h.value,lazy:!0,paginator:!0,rows:_(o).table.rows,filters:f.value,"onUpdate:filters":c[1]||(c[1]=e=>f.value=e),loading:_(o).table.isLoading,onFilter:K,onPage:_(o).table.onPage,filterDisplay:"row",removableSort:"",stripedRows:""},{default:a(()=>[t(n,{field:"first_name",header:"Nome",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{filter:a(({filterModel:e,filterCallback:r})=>[t(v,{type:"text",modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,onKeydown:b(l=>r(),["enter"]),class:"p-column-filter",placeholder:"Filtra per nome"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),body:a(({data:e})=>[x(d(e.first_name),1)]),_:1}),t(n,{field:"last_name",header:"Cognome",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{filter:a(({filterModel:e,filterCallback:r})=>[t(v,{type:"text",modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,onKeydown:b(l=>r(),["enter"]),class:"p-column-filter",placeholder:"Filtra per cognome"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),body:a(({data:e})=>[x(d(e.last_name),1)]),_:1}),t(n,{field:"tax_code",header:"Codice fiscale",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{filter:a(({filterModel:e,filterCallback:r})=>[t(v,{type:"text",modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,onKeydown:b(l=>r(),["enter"]),class:"p-column-filter",placeholder:"Filtra per codice fiscale"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),body:a(({data:e})=>[x(d(e.tax_code),1)]),_:1}),t(n,{field:"policy_number",header:"Numero polizza"}),t(n,{field:"status",header:"Stato"},{body:a(({data:e})=>[i("div",W,[i("i",{class:O(["pi pi-circle-fill",{"text-green-300":e.status==="settled","text-red-600":e.status==="rejected","text-yellow-50":e.status==="in_progress"}])},null,2),i("div",X,d(_(P)(e.status)),1)])]),_:1}),t(n,{header:"",style:{width:"4rem"}},{body:a(({data:e})=>[q(t(C,{type:"button",onClick:r=>U(e),"aria-haspopup":"true","aria-controls":"overlay_menu",class:"mr-3",icon:"pi pi-arrow-right",text:"",rounded:""},null,8,["onClick"]),[[L,"Modifica",void 0,{top:!0}]])]),_:1})]),_:1},8,["value","total-records","rows","filters","loading","onPage"])])}}}),ee=V({__name:"ClaimsListView",setup(F){return(o,s)=>(u(),G(Y))}});export{ee as default};
