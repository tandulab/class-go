import"./user14579.js";import{I as g}from"./InputTextWithValidation14579.js";import{c as K,a as w,F as N}from"./index.esm14579.js";import{u as L}from"./location14579.js";import{s as T,h as y,e as C}from"./helpers14579.js";import{o as k,p as h,a as F,c as V,_ as I,r as a,b as S,e as U,g as l,f as s,w as v,z as A,A as B}from"../index14579.js";const z={setup(){k(()=>{f()});const c=h({}),o=L(),i=h({}),e=h(void 0),x=F(),b=K({name:w().required("Il nome Ã¨ obbligatorio")}),m=V(()=>o.getFormattedLocations),d=V(()=>o.getCurrentLocation),f=async function(){await o.fetchAllLocations().then(()=>{_()})},_=()=>{for(let n of m.value)r(n);i.value={...i.value}},r=n=>{if(n.children&&n.children.length){i.value[n.key]=!0;for(let u of n.children)r(u)}},p=function(){c.value.id=d.value.id,c.value.name=d.value.name,c.value.description=d.value.description},t=async function(n){T(),o.getLocationsDetail(n).then(()=>{p(),y()}).catch(u=>{C(x,u),y()})};return{tmp_branch:c,schema:b,expandedKeys:i,selectedKey:e,locations:m,onSubmit:async function(n,u){},onNodeSelect:n=>{t(n.id)}}},components:{InputTextWithValidation:g,Form:N}},D=l("div",{class:"flex justify-content-between align-items-center"},[l("h1",null,"Nuova sede")],-1),M={class:"flex"},W={class:"col-6 ml-0 pl-0"},j={class:"formgrid grid mt-3"},q={class:"field col-12"},E={class:"field col-12 flex flex-column"},R=l("label",{for:"role"},"Sede",-1),G={class:"field col-12 flex flex-column mt-3"},H=l("label",{for:"role"},"Descrizione",-1),J={class:"col-6"};function O(c,o,i,e,x,b){const m=a("InputTextWithValidation"),d=a("TreeSelect"),f=a("Textarea"),_=a("Form"),r=a("Card"),p=a("Tree");return S(),U("div",null,[D,l("div",M,[l("div",W,[s(r,null,{content:v(()=>[s(_,{"validation-schema":e.schema,onSubmit:e.onSubmit,class:"flex flex-column"},{default:v(()=>[l("div",j,[l("div",q,[s(m,{name:"name",label:"Nome*",modelValue:e.tmp_branch.name,class:"w-full","onUpdate:modelValue":o[0]||(o[0]=t=>e.tmp_branch.name=t)},null,8,["modelValue"])]),l("div",E,[R,s(d,{modelValue:e.tmp_branch.branch_selected,"onUpdate:modelValue":o[1]||(o[1]=t=>e.tmp_branch.branch_selected=t),options:e.locations,placeholder:"",class:"w-full",selectionMode:"single"},null,8,["modelValue","options"])]),l("div",G,[H,s(f,{modelValue:e.tmp_branch.description,"onUpdate:modelValue":o[2]||(o[2]=t=>e.tmp_branch.description=t),autoResize:"",rows:"5",cols:"30",class:"w-full"},null,8,["modelValue"])])])]),_:1},8,["validation-schema","onSubmit"])]),_:1})]),l("div",J,[e.locations?(S(),A(r,{key:0},{content:v(()=>[s(p,{value:e.locations,class:"w-full",expandedKeys:e.expandedKeys,"onUpdate:expandedKeys":o[3]||(o[3]=t=>e.expandedKeys=t),selectionKeys:e.selectedKey,"onUpdate:selectionKeys":o[4]||(o[4]=t=>e.selectedKey=t),onNodeSelect:e.onNodeSelect,selectionMode:"single"},null,8,["value","expandedKeys","selectionKeys","onNodeSelect"])]),_:1})):B("",!0)])])])}const te=I(z,[["render",O]]);export{te as default};
