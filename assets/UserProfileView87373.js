import{q as y,T as L,a as k,u as S,b as F,U as C,e as P,s as B,g as N,_ as U,r as u,h as m,i as _,k as s,j as r,f as q,w as V,x as c}from"../index87373.js";import{P as T}from"./PasswordWithValidation87373.js";const W={setup(){const n=y({}),{handleSubmit:t,resetForm:f}=L(),o=k(),i=S(),{showLoader:p,hideLoader:a}=F();C("password",P().min(8,"La password deve avere almeno 8 caratteri").required("La nuova password Ã¨ obbligatoria")),C("password_confirmation",P().min(8,"La password deve avere almeno 8 caratteri").required("Il conferma password Ã¨ obbligatorio").test("passwords-match","Le password non coincidono",function(e){return n.value.password===e}));const l=t(async()=>{const e={id:i.currentUserId,user:n.value};p(),await i.changePassword(e).then(async()=>{B(o,{message:"Password aggiornata correttamente",error:!1}),a(),f()}).catch(d=>{a(),N(o,d)})});return{tmp_user:n,onSubmit:l}},components:{PasswordWithValidation:T}},$={class:"formgrid grid mt-3"},j={class:"field col-12 flex flex-column"},E={class:"field col-12 flex flex-column"},I={class:"flex justify-content-end mt-3"};function A(n,t,f,o,i,p){const a=u("PasswordWithValidation"),l=u("Button");return m(),_("form",{onSubmit:t[2]||(t[2]=(...e)=>o.onSubmit&&o.onSubmit(...e)),class:"flex flex-column col-12"},[s("div",$,[s("div",j,[r(a,{name:"password",label:"Nuova password*",modelValue:o.tmp_user.password,class:"w-full","onUpdate:modelValue":t[0]||(t[0]=e=>o.tmp_user.password=e)},null,8,["modelValue"])]),s("div",E,[r(a,{name:"password_confirmation",label:"Conferma password*",modelValue:o.tmp_user.password_confirmation,class:"w-full","onUpdate:modelValue":t[1]||(t[1]=e=>o.tmp_user.password_confirmation=e)},null,8,["modelValue"])])]),s("div",I,[r(l,{type:"submit",label:"Cambia password",rounded:"",outlined:""})])],32)}const D=U(W,[["render",A]]),z={setup(){const n=S();return{user:q(()=>n.currentUser)}},components:{ChangePasswordForm:D}},G={class:"flex"},H={class:"col-6 flex-1"},J=s("h1",null,"Profilo",-1),K={class:"flex flex-column"},M={class:"col-12 flex flex-colum align-items-center p-0"},O=s("div",{class:"col-2"},"Nome",-1),Q={class:"font-bold"},R={class:"col-12 flex flex-colum align-items-center p-0"},X=s("div",{class:"col-2"},"Cognome",-1),Y={class:"font-bold"},Z={class:"col-12 flex flex-colum align-items-center p-0"},ss=s("div",{class:"col-2"},"Email",-1),os={class:"font-bold"},es={class:"col-12 flex flex-colum align-items-center p-0"},ts=s("div",{class:"col-2"},"Partner",-1),as={key:0,class:"font-bold"},ns={key:1},rs={class:"col-6 flex-1"},ls=s("h1",null,"Cambia password",-1);function cs(n,t,f,o,i,p){const a=u("Card"),l=u("ChangePasswordForm");return m(),_("div",G,[s("div",H,[r(a,{class:"h-full"},{content:V(()=>{var e,d,h,w,v,x,b,g;return[J,s("div",K,[s("div",M,[O,s("div",Q,c(((e=o.user)==null?void 0:e.first_name)||"-"),1)]),s("div",R,[X,s("div",Y,c(((d=o.user)==null?void 0:d.last_name)||"- "),1)]),s("div",Z,[ss,s("div",os,c(((h=o.user)==null?void 0:h.email)||"- "),1)]),s("div",es,[ts,(w=o.user)!=null&&w.partner?(m(),_("div",as,c((x=(v=o.user)==null?void 0:v.partner)==null?void 0:x.first_name)+" "+c((g=(b=o.user)==null?void 0:b.partner)==null?void 0:g.last_name_name),1)):(m(),_("div",ns,"-"))])])]}),_:1})]),s("div",rs,[r(a,{class:"h-full"},{content:V(()=>[ls,r(l)]),_:1})])])}const ms=U(z,[["render",cs]]);export{ms as default};
