import{k as S,a as U,u as g,_ as C,r as d,b as V,e as P,g as s,f as r,c as F,w,t as i}from"../index50555.js";import{u as L,d as v,a as x}from"./index.esm50555.js";import{P as y}from"./PasswordWithValidation50555.js";import{s as B,a as $,h as b,e as k}from"./helpers50555.js";const N={setup(){const n=S({}),{handleSubmit:e,resetForm:m}=L(),o=U(),c=g();v("password",x().min(8,"La password deve avere almeno 8 caratteri").required("La nuova password è obbligatoria")),v("password_confirmation",x().min(8,"La password deve avere almeno 8 caratteri").required("Il conferma password è obbligatorio").test("passwords-match","Le password non coincidono",function(t){return n.value.password===t}));const _=e(async()=>{const t={id:c.currentUserId,user:n.value};B(),await c.changePassword(t).then(async()=>{$(o,{message:"Password aggiornata correttamente",error:!1}),b(),m()}).catch(l=>{b(),k(o,l)})});return{tmp_user:n,onSubmit:_}},components:{PasswordWithValidation:y}},W={class:"formgrid grid mt-3"},q={class:"field col-12 flex flex-column"},E={class:"field col-12 flex flex-column"},I={class:"flex justify-content-end mt-3"};function T(n,e,m,o,c,_){const t=d("PasswordWithValidation"),l=d("Button");return V(),P("form",{onSubmit:e[2]||(e[2]=(...a)=>o.onSubmit&&o.onSubmit(...a)),class:"flex flex-column col-12"},[s("div",W,[s("div",q,[r(t,{name:"password",label:"Nuova password*",modelValue:o.tmp_user.password,class:"w-full","onUpdate:modelValue":e[0]||(e[0]=a=>o.tmp_user.password=a)},null,8,["modelValue"])]),s("div",E,[r(t,{name:"password_confirmation",label:"Conferma password*",modelValue:o.tmp_user.password_confirmation,class:"w-full","onUpdate:modelValue":e[1]||(e[1]=a=>o.tmp_user.password_confirmation=a)},null,8,["modelValue"])])]),s("div",I,[r(l,{type:"submit",label:"Cambia password",rounded:"",outlined:""})])],32)}const j=C(N,[["render",T]]),A={setup(){const n=g();return{user:F(()=>n.currentUser)}},components:{ChangePasswordForm:j}},D={class:"flex"},z={class:"col-6 flex-1"},G=s("h1",null,"Profilo",-1),H={class:"flex flex-column"},J={class:"col-12 flex flex-colum align-items-center p-0"},K=s("div",{class:"col-2"},"Nome",-1),M={class:"font-bold"},O={class:"col-12 flex flex-colum align-items-center p-0"},Q=s("div",{class:"col-2"},"Cognome",-1),R={class:"font-bold"},X={class:"col-12 flex flex-colum align-items-center p-0"},Y=s("div",{class:"col-2"},"Email",-1),Z={class:"font-bold"},ss={class:"col-12 flex flex-colum align-items-center p-0"},os=s("div",{class:"col-2"},"Sede",-1),es={class:"font-bold"},ts={class:"col-6 flex-1"},as=s("h1",null,"Cambia password",-1);function ns(n,e,m,o,c,_){const t=d("Card"),l=d("ChangePasswordForm");return V(),P("div",D,[s("div",z,[r(t,{class:"h-full"},{content:w(()=>{var a,u,f,p,h;return[G,s("div",H,[s("div",J,[K,s("div",M,i(((a=o.user)==null?void 0:a.first_name)||"-"),1)]),s("div",O,[Q,s("div",R,i(((u=o.user)==null?void 0:u.last_name)||"- "),1)]),s("div",X,[Y,s("div",Z,i(((f=o.user)==null?void 0:f.email)||"- "),1)]),s("div",ss,[os,s("div",es,i(((h=(p=o.user)==null?void 0:p.location)==null?void 0:h.name)||"-"),1)])])]}),_:1})]),s("div",ts,[r(t,{class:"h-full"},{content:w(()=>[as,r(l)]),_:1})])])}const ds=C(A,[["render",ns]]);export{ds as default};
