import{q as L,P as U,a as k,u as S,b as F,Q as P,e as C,s as B,g as N,_ as y,r as u,h as m,i as _,k as s,j as r,f as q,w as V,x as c}from"../index10650.js";import{P as W}from"./PasswordWithValidation10650.js";const $={setup(){const n=L({}),{handleSubmit:t,resetForm:f}=U(),o=k(),i=S(),{showLoader:p,hideLoader:a}=F();P("password",C().min(8,"La password deve avere almeno 8 caratteri").required("La nuova password è obbligatoria")),P("password_confirmation",C().min(8,"La password deve avere almeno 8 caratteri").required("Il conferma password è obbligatorio").test("passwords-match","Le password non coincidono",function(e){return n.value.password===e}));const l=t(async()=>{const e={id:i.currentUserId,user:n.value};p(),await i.changePassword(e).then(async()=>{B(o,{message:"Password aggiornata correttamente",error:!1}),a(),f()}).catch(d=>{a(),N(o,d)})});return{tmp_user:n,onSubmit:l}},components:{PasswordWithValidation:W}},j={class:"formgrid grid mt-3"},E={class:"field col-12 flex flex-column"},I={class:"field col-12 flex flex-column"},T={class:"flex justify-content-end mt-3"};function A(n,t,f,o,i,p){const a=u("PasswordWithValidation"),l=u("Button");return m(),_("form",{onSubmit:t[2]||(t[2]=(...e)=>o.onSubmit&&o.onSubmit(...e)),class:"flex flex-column col-12"},[s("div",j,[s("div",E,[r(a,{name:"password",label:"Nuova password*",modelValue:o.tmp_user.password,class:"w-full","onUpdate:modelValue":t[0]||(t[0]=e=>o.tmp_user.password=e)},null,8,["modelValue"])]),s("div",I,[r(a,{name:"password_confirmation",label:"Conferma password*",modelValue:o.tmp_user.password_confirmation,class:"w-full","onUpdate:modelValue":t[1]||(t[1]=e=>o.tmp_user.password_confirmation=e)},null,8,["modelValue"])])]),s("div",T,[r(l,{type:"submit",label:"Cambia password",rounded:"",outlined:""})])],32)}const D=y($,[["render",A]]),Q={setup(){const n=S();return{user:q(()=>n.currentUser)}},components:{ChangePasswordForm:D}},z={class:"flex"},G={class:"col-6 flex-1"},H=s("h1",null,"Profilo",-1),J={class:"flex flex-column"},K={class:"col-12 flex flex-colum align-items-center p-0"},M=s("div",{class:"col-2"},"Nome",-1),O={class:"font-bold"},R={class:"col-12 flex flex-colum align-items-center p-0"},X=s("div",{class:"col-2"},"Cognome",-1),Y={class:"font-bold"},Z={class:"col-12 flex flex-colum align-items-center p-0"},ss=s("div",{class:"col-2"},"Email",-1),os={class:"font-bold"},es={class:"col-12 flex flex-colum align-items-center p-0"},ts=s("div",{class:"col-2"},"Partner",-1),as={key:0,class:"font-bold"},ns={key:1},rs={class:"col-6 flex-1"},ls=s("h1",null,"Cambia password",-1);function cs(n,t,f,o,i,p){const a=u("Card"),l=u("ChangePasswordForm");return m(),_("div",z,[s("div",G,[r(a,{class:"h-full"},{content:V(()=>{var e,d,h,w,v,x,b,g;return[H,s("div",J,[s("div",K,[M,s("div",O,c(((e=o.user)==null?void 0:e.first_name)||"-"),1)]),s("div",R,[X,s("div",Y,c(((d=o.user)==null?void 0:d.last_name)||"- "),1)]),s("div",Z,[ss,s("div",os,c(((h=o.user)==null?void 0:h.email)||"- "),1)]),s("div",es,[ts,(w=o.user)!=null&&w.partner?(m(),_("div",as,c((x=(v=o.user)==null?void 0:v.partner)==null?void 0:x.first_name)+" "+c((g=(b=o.user)==null?void 0:b.partner)==null?void 0:g.last_name_name),1)):(m(),_("div",ns,"-"))])])]}),_:1})]),s("div",rs,[r(a,{class:"h-full"},{content:V(()=>[ls,r(l)]),_:1})])])}const ms=y(Q,[["render",cs]]);export{ms as default};
