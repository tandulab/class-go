import{d as S,a5 as N,z as L,q as U,a2 as v,f as C,o as z,r as c,G as B,h as p,i as w,k as r,x as d,j as t,w as a,H as y,l as b,L as $,a3 as m,a6 as E,N as I,K as j}from"../index51617.js";const O={class:"flex justify-content-between align-items-center"},P={key:0},A={key:1},q={class:"flex flex-row"},G={class:"ml-2"},H=S({__name:"ClaimsTable",setup(V){const o=N(),s=L(),_=U({first_name:{value:"",matchMode:v.LIKE},last_name:{value:"",matchMode:v.LIKE},tax_code:{value:"",matchMode:v.EQ}}),F=C(()=>o.getAllClaims),f=C(()=>o.getTotalClaims),D=()=>{o.table.onFilter(_.value)},M=function(){s.setDetailType("claimDetail",!0,"Nuova sinistro",null),s.updateSidebar(!0),s.setShowDetail(!0)},K=function(x){s.setDetailType("claimDetail",!1,"Dettaglio sinistro",x.id,void 0,!1),s.updateSidebar(!0)};return z(()=>{o.table.loadLazyData()}),(x,u)=>{const g=c("Button"),h=c("InputText"),n=c("Column"),T=c("DataTable"),k=B("tooltip");return p(),w("div",null,[r("div",O,[r("h1",null,[f.value==1?(p(),w("span",P," 1 Sinistro")):(p(),w("span",A,d(f.value)+" Sinistri",1))]),r("div",null,[t(g,{label:"Aggiungi sinistro",class:"mb-3",rounded:"",outlined:"",onClick:u[0]||(u[0]=e=>M()),severity:"contrast"})])]),t(T,{value:F.value,"total-records":f.value,lazy:!0,paginator:!0,rows:m(o).table.rows,filters:_.value,"onUpdate:filters":u[1]||(u[1]=e=>_.value=e),loading:m(o).table.isLoading,onFilter:D,onPage:m(o).table.onPage,filterDisplay:"row",removableSort:"",stripedRows:""},{default:a(()=>[t(n,{field:"first_name",header:"Nome",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{filter:a(({filterModel:e,filterCallback:i})=>[t(h,{type:"text",modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,onKeydown:y(l=>i(),["enter"]),class:"p-column-filter",placeholder:"Filtra per nome"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),body:a(({data:e})=>[b(d(e.first_name),1)]),_:1}),t(n,{field:"last_name",header:"Cognome",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{filter:a(({filterModel:e,filterCallback:i})=>[t(h,{type:"text",modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,onKeydown:y(l=>i(),["enter"]),class:"p-column-filter",placeholder:"Filtra per cognome"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),body:a(({data:e})=>[b(d(e.last_name),1)]),_:1}),t(n,{field:"tax_code",header:"Codice fiscale",showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{filter:a(({filterModel:e,filterCallback:i})=>[t(h,{type:"text",modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,onKeydown:y(l=>i(),["enter"]),class:"p-column-filter",placeholder:"Filtra per codice fiscale"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),body:a(({data:e})=>[b(d(e.tax_code),1)]),_:1}),t(n,{field:"policy_number",header:"Numero polizza"}),t(n,{field:"status",header:"Stato"},{body:a(({data:e})=>[r("div",q,[r("i",{class:$(["pi pi-circle-fill",{"text-green-300":e.status==="settled","text-red-600":e.status==="rejected","text-yellow-50":e.status==="in_progress"}])},null,2),r("div",G,d(m(E)(e.status)),1)])]),_:1}),t(n,{header:"",style:{width:"4rem"}},{body:a(({data:e})=>[I(t(g,{type:"button",onClick:i=>K(e),"aria-haspopup":"true","aria-controls":"overlay_menu",class:"mr-3",icon:"pi pi-arrow-right",text:"",rounded:""},null,8,["onClick"]),[[k,"Modifica",void 0,{top:!0}]])]),_:1})]),_:1},8,["value","total-records","rows","filters","loading","onPage"])])}}}),R=S({__name:"ClaimsListView",setup(V){return(o,s)=>(p(),j(H))}});export{R as default};
